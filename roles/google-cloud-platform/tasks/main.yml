---
# tasks file for google-cloud-platform

# register network, subnet, and firewall variables
- import_tasks: network.yml
  when: operation == "provision"

# provision all hosts
- include_tasks: provision.yml
  vars:
    instance_name: "{{ item.host }}"
  loop: "{{ hosts }}"
  when: operation == "provision"

# decomission all hosts
- include_tasks: decomission.yml
  vars:
    instance_name: "{{ item.host }}"
  loop: "{{ hosts }}"
  when: operation == "decomission"

# remove virtual private network
- import_tasks: network-delete.yml
  when: operation == "decomission" and removeNetwork == true
